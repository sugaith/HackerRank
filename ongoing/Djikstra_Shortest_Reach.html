<!DOCTYPE HTML>
<html lang="en">

<body style="background-color: black; color: white">

<a href="https://www.hackerrank.com/challenges/dijkstrashortreach/problem?isFullScreen=true">
  <h1>Dijkstra: Shortest Reach various not passing!!!</h1>
</a>

<script>
  // Complete the shortestReach function below.
  function shortestReach(n, edges, s) {
    function runGraph(Graph, startNode) {
      const queue = [];
      queue.push({
        cost: 0, node: startNode,
      });
      let passedOverDistances = {};
      passedOverDistances[startNode] = 0;

      while (queue.length) {
        const currentNode = queue.shift();
        const neighbours = Graph[currentNode.node];
        console.log('currentNode')
        console.log(currentNode)
        if (!neighbours) continue;

        for (let i = 0; i < neighbours.length; i++) {
          const neighbour = neighbours[i];

          if (passedOverDistances[neighbour.node] === undefined)
            passedOverDistances[neighbour.node] = Infinity;

          console.log('passedOverDistances[neighbour.node]')
          console.log(passedOverDistances[neighbour.node])

          if (passedOverDistances[neighbour.node] >
            passedOverDistances[currentNode.node] + neighbour.cost  ) {

            passedOverDistances[neighbour.node] =
              passedOverDistances[currentNode.node] + neighbour.cost;

            queue.push({
              cost: passedOverDistances[neighbour.node],
              node: neighbour.node
            });
            console.log('queu..... added........................e')
            console.log([...queue])
          }
        }
      }
      return passedOverDistances;
    }

    const Graph = [];
    for (const pair of edges) {
      const fromNode = pair[0];
      const toNode = pair[1];
      const distance = pair[2];

      const nodeToAdd_from = {
        node: toNode,
        cost: distance,
      }
      if (Graph[fromNode])
        Graph[fromNode].push(nodeToAdd_from);
      else
        Graph[fromNode] = [nodeToAdd_from];

      const nodeToAdd_to = {
        node: fromNode,
        cost: distance,
      }
      if (Graph[toNode])
        Graph[toNode].push(nodeToAdd_to);
      else
        Graph[toNode] = [nodeToAdd_to];
    }

    console.log('Graph')
    console.log(Graph)

    let distanceSum = runGraph(Graph, s);
    delete distanceSum[s];
    console.log(Object.values(distanceSum));
    distanceSum = Object.values(distanceSum);
    for (let iDis=1; iDis < n - 1 ; iDis++) {
      if (iDis === s) continue;
      if (!distanceSum[iDis]) distanceSum[iDis] = -1;
    }
    return Object.values(distanceSum);
  }


</script>

<!--RUN-->
<script>
$(document).ready(() => {
  const edges = [
    [ 1, 2, 24 ], [ 1, 4, 20 ], [ 3, 1, 3 ], [ 4, 3, 12 ]
  ];
  console.log(shortestReach(4, edges, 1));
  });
</script>
</body>
</html>
